"use strict";window.IronWeb=window.IronWeb||{},function(){var e=document.currentScript||document.querySelector("[data-pca-key]");$.getScript("//services.postcodeanywhere.co.uk/js/address-3.70.min.js").done(function(){var t=new pca.Address([{element:"id_search",field:""},{element:"_line1",field:"Line1"},{element:"_line2",field:"Line2",mode:window.pca.fieldMode.POPULATE},{element:"_line3",field:"Line3",mode:pca.fieldMode.POPULATE},{element:"_line4",field:"Line4",mode:pca.fieldMode.POPULATE},{element:"id_city",field:"City",mode:pca.fieldMode.POPULATE},{element:"id_postcode",field:"PostalCode",mode:pca.fieldMode.POPULATE},{element:"id_country",field:"CountryIso2",mode:pca.fieldMode.POPULATE}],{key:e.getAttribute("data-pca-key"),search:{countries:e.getAttribute("data-pca-country")},bar:{visible:!1},suppressAutocomplete:!1});t.listen("results",function(e){1===e.length&&"Address"!==e[0].Type&&t.select(e[0])}),t.listen("populate",function(e,t){$.Topic("pca.address").publish(e,t)}),t.listen("search",function(){$.Topic("pca.search").publish()})});var t=document.createElement("link");t.rel="stylesheet",t.href="//services.postcodeanywhere.co.uk/css/address-3.70.min.css",document.getElementsByTagName("head")[0].appendChild(t)}(),window.IronWeb.initCreateAddressModal=function(t){var i=$(".address.modal"),n=i.find("form"),d=n.prop("action"),e=n.find("button[type=submit]"),o=n.find(".found-address");function s(){e.prop("disabled",!0),o.text("")}function r(){window.alert("Error adding address. Please try again or contact support.")}return n.submit(function(e){e.preventDefault(),$.post(d,n.serialize()).done(function(e){e.errors&&r(),"function"==typeof t&&t(e),i.modal("hide")}).fail(function(){r()})}),i.on("hide.bs.modal",function(){n[0].reset(),s()}),$.Topic("pca.address").subscribe(function(t){e.prop("disabled",!1);var i=[];["FormattedLine1","FormattedLine2","FormattedLine3","FormattedLine4","City","PostalCode"].forEach(function(e){t[e]&&i.push(t[e])}),o.text(i.join(", "))}),$.Topic("pca.search").subscribe(s),i};