/*! 
* Easy Media Gallery
*
* Copyright 2012, http://ghozylab.com/
* Released under the WTFPL license 
*
*/
jQuery(document).ajaxComplete(function(){InitializeSettings();});jQuery(document).ready(function($){InitializeSettings();});function InitializeSettings(){var emgadelay;clearTimeout(emgadelay);setTimeout(emgadelay,100);function emgadelay(){(function($,undefined){$.EmgHoverDir=function(e,t){this.$el=$(t);this._init(e)};$.EmgHoverDir.defaults={hoverDelay:0,reverse:false};$.EmgHoverDir.prototype={_init:function(e){this.options=$.extend(true,{},$.EmgHoverDir.defaults,e);this._loadEvents()},_loadEvents:function(){var e=this;this.$el.bind("mouseenter.emghoverdir, mouseleave.emghoverdir",function(t){var n=$(this),r=t.type,i=n.find("article"),s=e._getDir(n,{x:t.pageX,y:t.pageY}),o=e._getClasses(s);i.removeClass();if(r==="mouseenter"){i.hide().addClass(o.from);clearTimeout(e.tmhover);e.tmhover=setTimeout(function(){i.show(0,function(){$(this).addClass("da-animate").addClass(o.to)})},e.options.hoverDelay)}else{i.addClass("da-animate");clearTimeout(e.tmhover);i.addClass(o.from)}})},_getDir:function(e,t){var n=e.width(),r=e.height(),i=(t.x-e.offset().left-n/2)*(n>r?r/n:1),s=(t.y-e.offset().top-r/2)*(r>n?n/r:1),o=Math.round((Math.atan2(s,i)*(180/Math.PI)+180)/90+3)%4;return o},_getClasses:function(e){var t,n;switch(e){case 0:!this.options.reverse?t="da-slideFromTop":t="da-slideFromBottom";n="da-slideTop";break;case 1:!this.options.reverse?t="da-slideFromRight":t="da-slideFromLeft";n="da-slideLeft";break;case 2:!this.options.reverse?t="da-slideFromBottom":t="da-slideFromTop";n="da-slideTop";break;case 3:!this.options.reverse?t="da-slideFromLeft":t="da-slideFromRight";n="da-slideLeft";break}return{from:t,to:n}}};var logError=function(e){if(this.console){console.error(e)}};$.fn.emghoverdir=function(e){if(typeof e==="string"){var t=Array.prototype.slice.call(arguments,1);this.each(function(){var n=$.data(this,"emghoverdir");if(!n){logError("cannot call methods on emghoverdir prior to initialization; "+"attempted to call method '"+e+"'");return}if(!$.isFunction(n[e])||e.charAt(0)==="_"){logError("no such method '"+e+"' for emghoverdir instance");return}n[e].apply(n,t)})}else{this.each(function(){var t=$.data(this,"emghoverdir");if(!t){$.data(this,"emghoverdir",new $.EmgHoverDir(e,this))}})}return this}})(jQuery);jQuery(function(){jQuery(window).scroll(function(){if(jQuery("#mbCenter").size()>0){var e=parseInt(jQuery(document).scrollTop());var t=jQuery("#mbCenter").offset();var n=parseInt(t.top+jQuery("#mbCenter").height()+90-e);var r=jQuery(window).height()-n;if(e<t.top-90){setTimeout(function(){jQuery("#mbCenter").stop().animate({top:jQuery(window).scrollTop()+340},500)},150)}if(r>1&&jQuery(window).height()<jQuery("#mbCenter").height()-90){setTimeout(function(){jQuery("#mbCenter").stop().animate({top:t.top+340},500)},150)}else if(r>1&&jQuery(window).height()>jQuery("#mbCenter").height()+90){setTimeout(function(){jQuery("#mbCenter").stop().animate({top:jQuery(window).scrollTop()+340},500)},150)}}})})
jQuery(function($){$("div.da-thumbs").emghoverdir();if(EasyFront.lightboxstyle=='emglb'){window.emgaddEvent('domready',function(){Easymedia.scanPage();});}});}}
jQuery(function($){$.Emgisotope.prototype._getCenteredMasonryColumns=function(){this.width=this.element.width();var parentWidth=this.element.parent().width();var colW=this.options.masonry&&this.options.masonry.columnWidth||this.$filteredAtoms.outerWidth(true)||parentWidth;var cols=Math.floor(parentWidth/colW);cols=Math.max(cols,1);this.masonry.cols=cols;this.masonry.columnWidth=colW;};$.Emgisotope.prototype._masonryReset=function(){this.masonry={};this._getCenteredMasonryColumns();var i=this.masonry.cols;this.masonry.colYs=[];while(i--){this.masonry.colYs.push(0);}};$.Emgisotope.prototype._masonryResizeChanged=function(){var prevColCount=this.masonry.cols;this._getCenteredMasonryColumns();return(this.masonry.cols!==prevColCount);};$.Emgisotope.prototype._masonryGetContainerSize=function(){var unusedCols=0,i=this.masonry.cols;while(--i){if(this.masonry.colYs[i]!==0){break;}
unusedCols++;};return{height:Math.max.apply(Math,this.masonry.colYs),width:(this.masonry.cols-unusedCols)*this.masonry.columnWidth};};});function easyActiveStyleSheet(e){var t,n,r;for(t=0;n=document.getElementsByTagName("link")[t];t++){if(n.getAttribute("rel").indexOf("style")!=-1&&n.getAttribute("title")){n.disabled=true;if(n.getAttribute("title")==e)n.disabled=false}}}function getActiveStyleSheet(){var e,t;for(e=0;t=document.getElementsByTagName("link")[e];e++){if(t.getAttribute("rel").indexOf("style")!=-1&&t.getAttribute("title")&&!t.disabled)return t.getAttribute("title")}return null}function getPreferredStyleSheet(){var e,t;for(e=0;t=document.getElementsByTagName("link")[e];e++){if(t.getAttribute("rel").indexOf("style")!=-1&&t.getAttribute("rel").indexOf("alt")==-1&&t.getAttribute("title"))return t.getAttribute("title")}return null}
easyActiveStyleSheet(EasyFront.defstyle);(function($){var myFuncCalls=0,loadEvery;$.fn.readyLoad=function(options){settings=$.extend({'elementId':'','isPagination':Number.NEGATIVE_INFINITY,'isLazyload':Number.NEGATIVE_INFINITY,'imageCount':Number.POSITIVE_INFINITY,},options);loadEvery=Math.min(Math.min(settings.imageCount,5),10);return this.each(function(){var $self=$(this);var $ttl=$self.find("p");var $ttlup=$self.parent().find("p");var $elp=$self.parent();var $elpp=$self.parent().parent();var $elppp=$self.parent().parent().parent();if($ttl.hasClass("emgfittext")&&$ttl.text().length>0){$ttl.fadeIn(1e3);}else{$ttl.hide();}
if($ttlup.hasClass("emgfittext")&&$ttlup.text().length>0){$ttlup.fadeIn("fast");}else{$ttlup.hide();}
if($elpp.prev().hasClass("emg-badges")){$elpp.prev("span.emg-badges").fadeIn(2e3)}
if($elp.prev().hasClass("emg-badges")){$elp.prev("span.emg-badges").fadeIn(2e3)}
if($elpp.hasClass("preloaderview")){$elpp.removeClass("preloaderview")}
if($elppp.hasClass("preloaderview")){$elppp.removeClass("preloaderview")}
if($.trim(settings.ispagination)!=1){try{if(myFuncCalls>=loadEvery){jQuery(".easycontainer-"+settings.elementId).emgisotope('reLayout');myFuncCalls=0;}
myFuncCalls++;}catch(e){}}});};})(jQuery);function loadImages(sel,pref,ispg,icont,islz){if(islz==1){jQuery(sel).lazy({bind:"event",attribute:"data-original",effect:"fadeIn",visibleOnly:false,enableThrottle:true,throttle:250,effectTime:900,threshold:100,afterLoad:function(element){element.after(jQuery(element).readyLoad({elementId:pref,isPagination:ispg,isLazyload:islz,imageCount:icont}));}});}else{var imgLoad=emgimagesLoaded(jQuery(".pagwrap-"+pref+" .emglazy"));imgLoad.on('progress',function(instance,image){jQuery(image.img).readyLoad({elementId:pref,isPagination:ispg,isLazyload:0,imageCount:icont});});}};
/*!
 * imagesLoaded PACKAGED v3.1.8
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
/*!
 * EventEmitter v4.2.6 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 */
(function(){function e(){}function i(e,t){var n=e.length;while(n--){if(e[n].listener===t){return n}}return-1}function s(e){return function(){return this[e].apply(this,arguments)}}var t=e.prototype;var n=this;var r=n.EventEmitter;t.getListeners=function(t){var n=this._getEvents();var r;var i;if(typeof t==="object"){r={};for(i in n){if(n.hasOwnProperty(i)&&t.test(i)){r[i]=n[i]}}}else{r=n[t]||(n[t]=[])}return r};t.flattenListeners=function(t){var n=[];var r;for(r=0;r<t.length;r+=1){n.push(t[r].listener)}return n};t.getListenersAsObject=function(t){var n=this.getListeners(t);var r;if(n instanceof Array){r={};r[t]=n}return r||n};t.addListener=function(t,n){var r=this.getListenersAsObject(t);var s=typeof n==="object";var o;for(o in r){if(r.hasOwnProperty(o)&&i(r[o],n)===-1){r[o].push(s?n:{listener:n,once:false})}}return this};t.on=s("addListener");t.addOnceListener=function(t,n){return this.addListener(t,{listener:n,once:true})};t.once=s("addOnceListener");t.defineEvent=function(t){this.getListeners(t);return this};t.defineEvents=function(t){for(var n=0;n<t.length;n+=1){this.defineEvent(t[n])}return this};t.removeListener=function(t,n){var r=this.getListenersAsObject(t);var s;var o;for(o in r){if(r.hasOwnProperty(o)){s=i(r[o],n);if(s!==-1){r[o].splice(s,1)}}}return this};t.off=s("removeListener");t.addListeners=function(t,n){return this.manipulateListeners(false,t,n)};t.removeListeners=function(t,n){return this.manipulateListeners(true,t,n)};t.manipulateListeners=function(t,n,r){var i;var s;var o=t?this.removeListener:this.addListener;var u=t?this.removeListeners:this.addListeners;if(typeof n==="object"&&!(n instanceof RegExp)){for(i in n){if(n.hasOwnProperty(i)&&(s=n[i])){if(typeof s==="function"){o.call(this,i,s)}else{u.call(this,i,s)}}}}else{i=r.length;while(i--){o.call(this,n,r[i])}}return this};t.removeEvent=function(t){var n=typeof t;var r=this._getEvents();var i;if(n==="string"){delete r[t]}else if(n==="object"){for(i in r){if(r.hasOwnProperty(i)&&t.test(i)){delete r[i]}}}else{delete this._events}return this};t.removeAllListeners=s("removeEvent");t.emitEvent=function(t,n){var r=this.getListenersAsObject(t);var i;var s;var o;var u;for(o in r){if(r.hasOwnProperty(o)){s=r[o].length;while(s--){i=r[o][s];if(i.once===true){this.removeListener(t,i.listener)}u=i.listener.apply(this,n||[]);if(u===this._getOnceReturnValue()){this.removeListener(t,i.listener)}}}}return this};t.trigger=s("emitEvent");t.emit=function(t){var n=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,n)};t.setOnceReturnValue=function(t){this._onceReturnValue=t;return this};t._getOnceReturnValue=function(){if(this.hasOwnProperty("_onceReturnValue")){return this._onceReturnValue}else{return true}};t._getEvents=function(){return this._events||(this._events={})};e.noConflict=function(){n.EventEmitter=r;return e};if(typeof define==="function"&&define.amd){define("eventEmitter/EventEmitter",[],function(){return e})}else if(typeof module==="object"&&module.exports){module.exports=e}else{this.EventEmitter=e}}).call(this);(function(e){function r(t){var n=e.event;n.target=n.target||n.srcElement||t;return n}var t=document.documentElement;var n=function(){};if(t.addEventListener){n=function(e,t,n){e.addEventListener(t,n,false)}}else if(t.attachEvent){n=function(e,t,n){e[t+n]=n.handleEvent?function(){var t=r(e);n.handleEvent.call(n,t)}:function(){var t=r(e);n.call(e,t)};e.attachEvent("on"+t,e[t+n])}}var i=function(){};if(t.removeEventListener){i=function(e,t,n){e.removeEventListener(t,n,false)}}else if(t.detachEvent){i=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(r){e[t+n]=undefined}}}var s={bind:n,unbind:i};if(typeof define==="function"&&define.amd){define("eventie/eventie",s)}else{e.eventie=s}})(this);(function(e,t){if(typeof define==="function"&&define.amd){define(["eventEmitter/EventEmitter","eventie/eventie"],function(n,r){return t(e,n,r)})}else if(typeof exports==="object"){module.exports=t(e,require("wolfy87-eventemitter"),require("eventie"))}else{e.emgimagesLoaded=t(e,e.EventEmitter,e.eventie)}})(window,function(t,n,r){function u(e,t){for(var n in t){e[n]=t[n]}return e}function f(e){return a.call(e)==="[object Array]"}function l(e){var t=[];if(f(e)){t=e}else if(typeof e.length==="number"){for(var n=0,r=e.length;n<r;n++){t.push(e[n])}}else{t.push(e)}return t}function c(e,t,n){if(!(this instanceof c)){return new c(e,t)}if(typeof e==="string"){e=document.querySelectorAll(e)}this.elements=l(e);this.options=u({},this.options);if(typeof t==="function"){n=t}else{u(this.options,t)}if(n){this.on("always",n)}this.getImages();if(i){this.jqDeferred=new i.Deferred}var r=this;setTimeout(function(){r.check()})}function h(e){this.img=e}function d(e){this.src=e;p[e]=this}var i=t.jQuery;var s=t.console;var o=typeof s!=="undefined";var a=Object.prototype.toString;c.prototype=new n;c.prototype.options={};c.prototype.getImages=function(){this.images=[];for(var e=0,t=this.elements.length;e<t;e++){var n=this.elements[e];if(n.nodeName==="IMG"){this.addImage(n)}var r=n.nodeType;if(!r||!(r===1||r===9||r===11)){continue}var i=n.querySelectorAll("img");for(var s=0,o=i.length;s<o;s++){var u=i[s];this.addImage(u)}}};c.prototype.addImage=function(e){var t=new h(e);this.images.push(t)};c.prototype.check=function(){function r(r,i){if(e.options.debug&&o){s.log("confirm",r,i)}e.progress(r);t++;if(t===n){e.complete()}return true}var e=this;var t=0;var n=this.images.length;this.hasAnyBroken=false;if(!n){this.complete();return}for(var i=0;i<n;i++){var u=this.images[i];u.on("confirm",r);u.check()}};c.prototype.progress=function(e){this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded;var t=this;setTimeout(function(){t.emit("progress",t,e);if(t.jqDeferred&&t.jqDeferred.notify){t.jqDeferred.notify(t,e)}})};c.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=true;var t=this;setTimeout(function(){t.emit(e,t);t.emit("always",t);if(t.jqDeferred){var n=t.hasAnyBroken?"reject":"resolve";t.jqDeferred[n](t)}})};if(i){i.fn.emgimagesLoaded=function(e,t){var n=new c(this,e,t);return n.jqDeferred.promise(i(this))}}h.prototype=new n;h.prototype.check=function(){var e=p[this.img.src]||new d(this.img.src);if(e.isConfirmed){this.confirm(e.isLoaded,"cached was confirmed");return}if(this.img.complete&&this.img.naturalWidth!==undefined){this.confirm(this.img.naturalWidth!==0,"naturalWidth");return}var t=this;e.on("confirm",function(e,n){t.confirm(e.isLoaded,n);return true});e.check()};h.prototype.confirm=function(e,t){this.isLoaded=e;this.emit("confirm",this,t)};var p={};d.prototype=new n;d.prototype.check=function(){if(this.isChecked){return}var e=new Image;r.bind(e,"load",this);r.bind(e,"error",this);e.src=this.src;this.isChecked=true};d.prototype.handleEvent=function(e){var t="on"+e.type;if(this[t]){this[t](e)}};d.prototype.onload=function(e){this.confirm(true,"onload");this.unbindProxyEvents(e)};d.prototype.onerror=function(e){this.confirm(false,"onerror");this.unbindProxyEvents(e)};d.prototype.confirm=function(e,t){this.isConfirmed=true;this.isLoaded=e;this.emit("confirm",this,t)};d.prototype.unbindProxyEvents=function(e){r.unbind(e.target,"load",this);r.unbind(e.target,"error",this)};return c})